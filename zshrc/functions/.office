#! /bin/sh

FW="$HOME/.ghq/forkwell"

if [ -d $FW ]; then
  function update_fw() {
      g ft && g ch master && plrb && bundle install && yarn install
  }

  function update_db() {
      db:up && db:up RAILS_ENV=test && g ch db/schema.rb
  }

  function redo_db() {
    DB_ENV='development'
    if [ $1 = 'test' ]; then
        DB_ENV='test'
    fi

    sprk db:migrate:redo RAILS_ENV=$DB_ENV && \
    g ch db/schema.rb
  }

  function mocha_test() {
    NODE_ENV=test $FW/node_modules/.bin/mocha --timeout 0 -R dot $1
  }

  source $DOTFILES/zshrc/functions/describe_logs
  source $DOTFILES/zshrc/functions/view_log
fi
